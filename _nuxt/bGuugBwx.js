import{n as W,r as P,s as y,g as K,o as q,c as $,F as T,D as G,y as l,v as o,t as p,_ as N,E as B,G as ee,H as L,I as te,J,K as re,L as A,M as Q,N as se,O as ie,P as oe,Q as ne,R as ae,S as b,u as ce,p as C,T as F,a as d,b as k,d as E,C as fe,w as V,U as le,V as ue,W as _e}from"./ktOBnetP.js";const de=["onClick"],pe=W({__name:"TheFilters",props:{filters:{},modelValue:{}},emits:["update:modelValue"],setup(e,{emit:t}){const r=e,s=t,i=P(0),n=y(()=>{var f;return(f=r.filters[0])==null?void 0:f.value}),a=P(n.value),c=y(()=>r.filters[i.value]);K(c,f=>{a.value=f.value,s("update:modelValue",a.value)});function _(f){i.value=f}return(f,g)=>(q(),$("div",{class:l(f.$style.TheFilters)},[(q(!0),$(T,null,G(f.filters,(h,m)=>(q(),$("span",{key:`filter_item_${m}`,class:l([f.$style.filters__item,{[f.$style._active]:m===o(i)}]),onClick:O=>_(m)},p(h.title),11,de))),128))],2))}}),me="_TheFilters_cgxq7_1",ge="_filters__item_cgxq7_13",he="__active_cgxq7_25",ye={TheFilters:me,filters__item:ge,_active:he},ve={$style:ye},kt=N(pe,[["__cssModules",ve]]);async function be(e,t){return await Se(t).catch(s=>(console.error("Failed to get image meta for "+t,s+""),{width:0,height:0,ratio:0}))}async function Se(e){if(typeof Image>"u")throw new TypeError("Image not supported");return new Promise((t,r)=>{const s=new Image;s.onload=()=>{const i={width:s.width,height:s.height,ratio:s.width/s.height};t(i)},s.onerror=i=>r(i),s.src=e})}function D(e){return t=>t?e[t]||t:e.missingValue}function we({formatter:e,keyMap:t,joinWith:r="/",valueMap:s}={}){e||(e=(n,a)=>`${n}=${a}`),t&&typeof t!="function"&&(t=D(t));const i=s||{};return Object.keys(i).forEach(n=>{typeof i[n]!="function"&&(i[n]=D(i[n]))}),(n={})=>Object.entries(n).filter(([c,_])=>typeof _<"u").map(([c,_])=>{const f=i[c];return typeof f=="function"&&(_=f(n[c])),c=typeof t=="function"?t(c):c,e(c,_)}).join(r)}function I(e=""){if(typeof e=="number")return e;if(typeof e=="string"&&e.replace("px","").match(/^\d+$/g))return Number.parseInt(e,10)}function Ie(e=""){if(e===void 0||!e.length)return[];const t=new Set;for(const r of e.split(" ")){const s=Number.parseInt(r.replace("x",""));s&&t.add(s)}return Array.from(t)}function qe(e){if(e.length===0)throw new Error("`densities` must not be empty, configure to `1` to render regular size only (DPR 1.0)")}function $e(e){const t={};if(typeof e=="string")for(const r of e.split(/[\s,]+/).filter(s=>s)){const s=r.split(":");s.length!==2?t["1px"]=s[0].trim():t[s[0].trim()]=s[1].trim()}else Object.assign(t,e);return t}function Oe(e){const t={options:e},r=(i,n={})=>X(t,i,n),s=(i,n={},a={})=>r(i,{...a,modifiers:J(n,a.modifiers||{})}).url;for(const i in e.presets)s[i]=(n,a,c)=>s(n,a,{...e.presets[i],...c});return s.options=e,s.getImage=r,s.getMeta=(i,n)=>je(t,i,n),s.getSizes=(i,n)=>Me(t,i,n),t.$img=s,s}async function je(e,t,r){const s=X(e,t,{...r});return typeof s.getMeta=="function"?await s.getMeta():await be(e,s.url)}function X(e,t,r){var f,g;if(t&&typeof t!="string")throw new TypeError(`input must be a string (received ${typeof t}: ${JSON.stringify(t)})`);if(!t||t.startsWith("data:"))return{url:t};const{provider:s,defaults:i}=xe(e,r.provider||e.options.provider),n=ke(e,r.preset);if(t=B(t)?t:ee(t),!s.supportsAlias){for(const h in e.options.alias)if(t.startsWith(h)){const m=e.options.alias[h];m&&(t=L(m,t.slice(h.length)))}}if(s.validateDomains&&B(t)){const h=te(t).host;if(!e.options.domains.find(m=>m===h))return{url:t}}const a=J(r,n,i);a.modifiers={...a.modifiers};const c=a.modifiers.format;(f=a.modifiers)!=null&&f.width&&(a.modifiers.width=I(a.modifiers.width)),(g=a.modifiers)!=null&&g.height&&(a.modifiers.height=I(a.modifiers.height));const _=s.getImage(t,a,e);return _.format=_.format||c||"",_}function xe(e,t){const r=e.options.providers[t];if(!r)throw new Error("Unknown provider: "+t);return r}function ke(e,t){if(!t)return{};if(!e.options.presets[t])throw new Error("Unknown preset: "+t);return e.options.presets[t]}function Me(e,t,r){var M,z,j,u,S;const s=I((M=r.modifiers)==null?void 0:M.width),i=I((z=r.modifiers)==null?void 0:z.height),n=$e(r.sizes),a=(j=r.densities)!=null&&j.trim()?Ie(r.densities.trim()):e.options.densities;qe(a);const c=s&&i?i/s:0,_=[],f=[];if(Object.keys(n).length>=1){for(const v in n){const w=H(v,String(n[v]),i,c,e);if(w!==void 0){_.push({size:w.size,screenMaxWidth:w.screenMaxWidth,media:`(max-width: ${w.screenMaxWidth}px)`});for(const x of a)f.push({width:w._cWidth*x,src:R(e,t,r,w,x)})}}ze(_)}else for(const v of a){const w=Object.keys(n)[0];let x=w?H(w,String(n[w]),i,c,e):void 0;x===void 0&&(x={size:"",screenMaxWidth:0,_cWidth:(u=r.modifiers)==null?void 0:u.width,_cHeight:(S=r.modifiers)==null?void 0:S.height}),f.push({width:v,src:R(e,t,r,x,v)})}Pe(f);const g=f[f.length-1],h=_.length?_.map(v=>`${v.media?v.media+" ":""}${v.size}`).join(", "):void 0,m=h?"w":"x",O=f.map(v=>`${v.src} ${v.width}${m}`).join(", ");return{sizes:h,srcset:O,src:g==null?void 0:g.src}}function H(e,t,r,s,i){const n=i.options.screens&&i.options.screens[e]||Number.parseInt(e),a=t.endsWith("vw");if(!a&&/^\d+$/.test(t)&&(t=t+"px"),!a&&!t.endsWith("px"))return;let c=Number.parseInt(t);if(!n||!c)return;a&&(c=Math.round(c/100*n));const _=s?Math.round(c*s):r;return{size:t,screenMaxWidth:n,_cWidth:c,_cHeight:_}}function R(e,t,r,s,i){return e.$img(t,{...r.modifiers,width:s._cWidth?s._cWidth*i:void 0,height:s._cHeight?s._cHeight*i:void 0},r)}function ze(e){var r;e.sort((s,i)=>s.screenMaxWidth-i.screenMaxWidth);let t=null;for(let s=e.length-1;s>=0;s--){const i=e[s];i.media===t&&e.splice(s,1),t=i.media}for(let s=0;s<e.length;s++)e[s].media=((r=e[s+1])==null?void 0:r.media)||""}function Pe(e){e.sort((r,s)=>r.width-s.width);let t=null;for(let r=e.length-1;r>=0;r--){const s=e[r];s.width===t&&e.splice(r,1),t=s.width}}const We=we({keyMap:{format:"f",fit:"fit",width:"w",height:"h",resize:"s",quality:"q",background:"b"},joinWith:"&",formatter:(e,t)=>A(e)+"_"+A(t)}),Te=(e,{modifiers:t={},baseURL:r}={},s)=>{t.width&&t.height&&(t.resize=`${t.width}x${t.height}`,delete t.width,delete t.height);const i=We(t)||"_";return r||(r=L(s.options.nuxt.baseURL,"/_ipx")),{url:L(r,i,re(e))}},Le=!0,Ne=!0,Be=Object.freeze(Object.defineProperty({__proto__:null,getImage:Te,supportsAlias:Ne,validateDomains:Le},Symbol.toStringTag,{value:"Module"})),Y={screens:{xs:747,sm:640,md:768,lg:1024,xl:1280,xxl:1536,"2xl":1536},presets:{},provider:"ipxStatic",domains:[],alias:{},densities:[1,2],format:["webp"]};Y.providers={ipxStatic:{provider:Be,defaults:{}}};const Z=()=>{const e=se(),t=Q();return t.$img||t._img||(t._img=Oe({...Y,nuxt:{baseURL:e.app.baseURL},runtimeConfig:e}))};function Ae(e){var t;(t=performance==null?void 0:performance.mark)==null||t.call(performance,"mark_feature_usage",{detail:{feature:e}})}const Ce={src:{type:String,required:!1},format:{type:String,required:!1},quality:{type:[Number,String],required:!1},background:{type:String,required:!1},fit:{type:String,required:!1},modifiers:{type:Object,required:!1},preset:{type:String,required:!1},provider:{type:String,required:!1},sizes:{type:[Object,String],required:!1},densities:{type:String,required:!1},preload:{type:[Boolean,Object],required:!1},width:{type:[String,Number],required:!1},height:{type:[String,Number],required:!1},alt:{type:String,required:!1},referrerpolicy:{type:String,required:!1},usemap:{type:String,required:!1},longdesc:{type:String,required:!1},ismap:{type:Boolean,required:!1},loading:{type:String,required:!1,validator:e=>["lazy","eager"].includes(e)},crossorigin:{type:[Boolean,String],required:!1,validator:e=>["anonymous","use-credentials","",!0,!1].includes(e)},decoding:{type:String,required:!1,validator:e=>["async","auto","sync"].includes(e)},nonce:{type:[String],required:!1}},Fe=e=>{const t=y(()=>({provider:e.provider,preset:e.preset})),r=y(()=>({width:I(e.width),height:I(e.height),alt:e.alt,referrerpolicy:e.referrerpolicy,usemap:e.usemap,longdesc:e.longdesc,ismap:e.ismap,crossorigin:e.crossorigin===!0?"anonymous":e.crossorigin||void 0,loading:e.loading,decoding:e.decoding,nonce:e.nonce})),s=Z(),i=y(()=>({...e.modifiers,width:I(e.width),height:I(e.height),format:e.format,quality:e.quality||s.options.quality,background:e.background,fit:e.fit}));return{options:t,attrs:r,modifiers:i}},Ee={...Ce,placeholder:{type:[Boolean,String,Number,Array],required:!1},placeholderClass:{type:String,required:!1}},Ve=["src"],De=W({__name:"NuxtImg",props:Ee,emits:["load","error"],setup(e,{emit:t}){const r=e,s=ie(),i=t,n=!1,a=Z(),c=Fe(r),_=P(!1),f=P(),g=y(()=>a.getSizes(r.src,{...c.options.value,sizes:r.sizes,densities:r.densities,modifiers:{...c.modifiers.value,width:I(r.width),height:I(r.height)}})),h=y(()=>{const u={...c.attrs.value,"data-nuxt-img":""};return(!r.placeholder||_.value)&&(u.sizes=g.value.sizes,u.srcset=g.value.srcset),u}),m=y(()=>{let u=r.placeholder;if(u===""&&(u=!0),!u||_.value)return!1;if(typeof u=="string")return u;const S=Array.isArray(u)?u:typeof u=="number"?[u,u]:[10,10];return a(r.src,{...c.modifiers.value,width:S[0],height:S[1],quality:S[2]||50,blur:S[3]||3},c.options.value)}),O=y(()=>r.sizes?g.value.src:a(r.src,c.modifiers.value,c.options.value)),M=y(()=>m.value?m.value:O.value),j=Q().isHydrating;return oe(()=>{if(m.value){const u=new Image;O.value&&(u.src=O.value),r.sizes&&(u.sizes=g.value.sizes||"",u.srcset=g.value.srcset),u.onload=S=>{_.value=!0,i("load",S)},Ae("nuxt-image");return}f.value&&(f.value.complete&&j&&(f.value.getAttribute("data-error")?i("error",new Event("error")):i("load",new Event("load"))),f.value.onload=u=>{i("load",u)},f.value.onerror=u=>{i("error",u)})}),(u,S)=>(q(),$("img",ne({ref_key:"imgEl",ref:f,class:r.placeholder&&!_.value?r.placeholderClass:void 0},{...o(n)?{onerror:"this.setAttribute('data-error', 1)"}:{},...h.value,...o(s)},{src:M.value}),null,16,Ve))}});function U(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}const He=["disabled"],Re=W({__name:"OfferItem",props:{offer:{}},setup(e){const t={rub:"₽",auction:"Аукцион",directSales:"Прямые продажи",seller:"Продавец",productType:"Вид товара",quantity:"Количество",pricePerItem:"Стоимость за штуку",amount:"шт.",addToOffer:"Добавить в сделки",pay:"Оплатить",payed:"Оплачено"},r=ae(),s=e,i=y(()=>U(s.offer.price*s.offer.quantity)),n=y(()=>U(s.offer.price)),a=y(()=>s.offer.status===b.selledStatus),c=ce();function _(){c.toggleLikeOffer(s.offer.id)}function f(){switch(s.offer.status){case b.stockStatus:c.setOfferStatus(s.offer.id,b.bagStatus);break;case b.bagStatus:c.setOfferStatus(s.offer.id,b.selledStatus);break;default:c.setOfferStatus(s.offer.id,b.stockStatus);break}}const g=y(()=>[{[r._bag]:s.offer.status===b.bagStatus,[r._disabled]:s.offer.status===b.selledStatus}]),h=C({[b.bagStatus]:t.pay,[b.stockStatus]:t.addToOffer,[b.selledStatus]:t.payed}),m=C({[F.direct]:t.directSales,[F.auction]:t.auction});return(O,M)=>{const z=De,j=fe;return q(),$("article",{class:l(o(r).OfferItem)},[d("div",{class:l(o(r).OfferItem__left)},[k(z,{src:s.offer.image,width:"256",height:"256",class:l(o(r).product__image)},null,8,["src","class"]),d("div",{class:l(o(r).offerInfo)},[d("p",{class:l(o(r).offer__type)},p(o(m)[s.offer.offerType]),3),d("h2",{class:l([o(r).product__title,o(r)._blue])},p(s.offer.title),3),d("p",{class:l([o(r).product__cityPlace,o(r)._highlight])},[k(j,{name:"icon:mapmark",class:l(o(r).mapMark)},null,8,["class"]),E(" "+p(s.offer.city),1)],2),d("p",{class:l(o(r).product__seller)},[E(p(t.seller)+" ",1),d("span",{class:l(o(r)._blue)},p(s.offer.seller),3)],2),d("p",{class:l(o(r).product__type)},[d("span",null,p(t.productType),1),d("span",{class:l(o(r)._highlight)},p(s.offer.productType),3)],2),d("p",{class:l(o(r).product__description)},p(s.offer.description),3)],2)],2),d("div",{class:l(o(r).OfferItem__right)},[d("div",{class:l(o(r).offer__priceInfo)},[d("p",{class:l(o(r).offer__totalPrice)},p(o(i))+" "+p(t.rub),3),d("ul",{class:l(o(r).offer__priceList)},[d("li",{class:l(o(r).offer__priceItem)},[d("span",{class:l(o(r).price__quantity)},p(t.quantity),3),d("span",{class:l([o(r).price__quantity,o(r)._blue])},p(s.offer.quantity)+" "+p(t.amount),3)],2),d("li",{class:l(o(r).offer__priceItem)},[d("span",{class:l(o(r).price)},p(t.pricePerItem),3),d("span",{class:l([o(r).price,o(r)._blue])},p(o(n))+" "+p(t.rub),3)],2)],2)],2),d("div",{class:l(o(r).offer__buttons)},[d("button",{onClick:f,disabled:o(a),class:l([o(r).addButton,o(g)])},p(o(h)[s.offer.status]),11,He),d("button",{onClick:_,class:l([o(r).favouriteButton,{[o(r)._liked]:s.offer.liked}])},[k(j,{name:"icon:heart",class:l(o(r).buttonIcon)},null,8,["class"])],2)],2)],2)],2)}}}),Ue="_OfferItem_j80a3_1",Ge="__blue_j80a3_17",Je="__highlight_j80a3_20",Qe="_OfferItem__left_j80a3_24",Xe="_product__image_j80a3_35",Ye="_offerInfo_j80a3_43",Ze="_offer__type_j80a3_50",Ke="_product__cityPlace_j80a3_51",et="_product__seller_j80a3_52",tt="_product__type_j80a3_53",rt="_product__title_j80a3_69",st="_product__description_j80a3_76",it="_mapMark_j80a3_97",ot="_OfferItem__right_j80a3_107",nt="_offer__priceInfo_j80a3_129",at="_offer__totalPrice_j80a3_135",ct="_offer__priceList_j80a3_142",ft="_offer__priceItem_j80a3_149",lt="_price_j80a3_154",ut="_price__quantity_j80a3_155",_t="_offer__buttons_j80a3_166",dt="_addButton_j80a3_171",pt="_favouriteButton_j80a3_172",mt="__bag_j80a3_192",gt="__disabled_j80a3_196",ht="_buttonIcon_j80a3_210",yt="__liked_j80a3_214",vt={OfferItem:Ue,_blue:Ge,_highlight:Je,OfferItem__left:Qe,product__image:Xe,offerInfo:Ye,offer__type:Ze,product__cityPlace:Ke,product__seller:et,product__type:tt,product__title:rt,product__description:st,mapMark:it,OfferItem__right:ot,offer__priceInfo:nt,offer__totalPrice:at,offer__priceList:ct,offer__priceItem:ft,price:lt,price__quantity:ut,offer__buttons:_t,addButton:dt,favouriteButton:pt,_bag:mt,_disabled:gt,buttonIcon:ht,_liked:yt},bt={$style:vt},St=N(Re,[["__cssModules",bt]]),wt=W({__name:"OfferList",props:{offers:{}},setup(e){const t=e;return(r,s)=>{const i=St;return q(),$(T,null,[k(le,{name:"offer-list",tag:"ul",class:l(r.$style.OfferList)},{default:V(()=>[(q(!0),$(T,null,G(t.offers,n=>(q(),$("li",{key:n.id,class:l(r.$style.offerWrapper)},[k(i,{offer:n},null,8,["offer"])],2))),128))]),_:1},8,["class"]),k(ue,{name:"fade"},{default:V(()=>[t.offers.length?_e("",!0):(q(),$("h2",{key:0,class:l(r.$style.noOffers)}," Предложения отсутствуют ",2))]),_:1})],64)}}}),It="_OfferList_1hlnr_1",qt="_offerWrapper_1hlnr_14",$t="_noOffers_1hlnr_18",Ot={OfferList:It,offerWrapper:qt,noOffers:$t},jt={$style:Ot},Mt=N(wt,[["__cssModules",jt]]);export{kt as _,Mt as a};
